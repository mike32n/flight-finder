const sqlite3 = require("sqlite3").verbose();

const db = new sqlite3.Database("./database.sqlite");

db.serialize(() => {
  db.run(`
    CREATE TABLE IF NOT EXISTS destinations (
      id INTEGER PRIMARY KEY AUTOINCREMENT,
      city_name TEXT NOT NULL,
      iata_code TEXT UNIQUE NOT NULL
    )
  `);

  const cities = [
    { city: "Abu Dhabi", iata: "AUH" },
    { city: "Alicante", iata: "ALC" },
    { city: "Amman", iata: "AMM" },
    { city: "Amsterdam", iata: "AMS" },
    { city: "Ankara", iata: "ESB" },
    { city: "Antalya", iata: "AYT" },
    { city: "Athens", iata: "ATH" },
    { city: "Baku", iata: "GYD" },
    { city: "Barcelona", iata: "BCN" },
    { city: "Bari", iata: "BRI" },
    { city: "Basel Mulhouse Freiburg", iata: "BSL" },
    { city: "Beijing", iata: "PEK" },
    { city: "Belgrade", iata: "BEG" },
    { city: "Bergamo", iata: "BGY" },
    { city: "Berlin", iata: "BER" },
    { city: "Bergen", iata: "BGO" },
    { city: "Bilbao", iata: "BIO" },
    { city: "Billund", iata: "BLL" },
    { city: "Bologna", iata: "BLQ" },
    { city: "Bordeaux", iata: "BOD" },
    { city: "Brasov", iata: "GHV" },
    { city: "Brussels", iata: "BRU" },
    { city: "Brussels (Charleroi)", iata: "CRL" },
    { city: "Bucharest (Băneasa)", iata: "BBU" },
    { city: "Bucharest (Otopeni)", iata: "OTP" },
    { city: "Burgas", iata: "BOJ" },
    { city: "Cagliari", iata: "CAG" },
    { city: "Cairo", iata: "CAI" },
    { city: "Castellon de la Plana", iata: "CDT" },
    { city: "Catania", iata: "CTA" },
    { city: "Chania", iata: "CHQ" },
    { city: "Chisinau", iata: "RMO" },
    { city: "Chongqing", iata: "CKG" },
    { city: "Cologne", iata: "CGN" },
    { city: "Corfu", iata: "CFU" },
    { city: "Copenhagen", iata: "CPH" },
    { city: "Doha", iata: "DOH" },
    { city: "Dortmund", iata: "DTM" },
    { city: "Dubai", iata: "DXB" },
    { city: "Dublin", iata: "DUB" },
    { city: "Dusseldorf", iata: "DUS" },
    { city: "Eindhoven", iata: "EIN" },
    { city: "Fertilia", iata: "AHO" },
    { city: "Frankfurt", iata: "FRA" },
    { city: "Funchal", iata: "FNC" },
    { city: "Geneva", iata: "GVA" },
    { city: "Genoa", iata: "GOA" },
    { city: "Gdansk", iata: "GDN" },
    { city: "Giza", iata: "SPX" },
    { city: "Gothenburg", iata: "GOT" },
    { city: "Gran Canaria", iata: "LPA" },
    { city: "Guangzhou", iata: "CAN" },
    { city: "Hahn", iata: "HHN" },
    { city: "Hamburg", iata: "HAM" },
    { city: "Helsinki", iata: "HEL" },
    { city: "Heraklion", iata: "HER" },
    { city: "Hurghada", iata: "HRG" },
    { city: "Istanbul (IST)", iata: "IST" },
    { city: "Istanbul (Sabiha Gökçen)", iata: "SAW" },
    { city: "Izmir", iata: "ADB" },
    { city: "Jeddah", iata: "JED" },
    { city: "Keflavik", iata: "KEF" },
    { city: "Katowice", iata: "KTW" },
    { city: "Kutaisi", iata: "KUT" },
    { city: "Lamezia Terme", iata: "SUF" },
    { city: "Larnaca", iata: "LCA" },
    { city: "Lisbon", iata: "LIS" },
    { city: "London", iata: "LON" },
    { city: "Luxembourg City", iata: "LUX" },
    { city: "Lyon", iata: "LYS" },
    { city: "Madrid (Barajas)", iata: "MAD" },
    { city: "Malaga", iata: "AGP" },
    { city: "Marrakech", iata: "RAK" },
    { city: "Marseille", iata: "MRS" },
    { city: "Memmingen", iata: "FMM" },
    { city: "Milan (Malpensa)", iata: "MXP" },
    { city: "Munich", iata: "MUC" },
    { city: "Mykonos", iata: "JMK" },
    { city: "Nantes", iata: "NTE" },
    { city: "Naples", iata: "NAP" },
    { city: "Nice", iata: "NCE" },
    { city: "Ningbo", iata: "NGB" },
    { city: "Nuremberg", iata: "NUE" },
    { city: "Oslo", iata: "OSL" },
    { city: "Palermo", iata: "PMO" },
    { city: "Palma de Mallorca", iata: "PMI" },
    { city: "Paphos", iata: "PFO" },
    { city: "Paris (Beauvais)", iata: "BVA" },
    { city: "Paris (Charles de Gaulle)", iata: "CDG" },
    { city: "Paris (Orly)", iata: "ORY" },
    { city: "Pisa", iata: "PSA" },
    { city: "Podgorica", iata: "TGD" },
    { city: "Porto", iata: "OPO" },
    { city: "Prague", iata: "PRG" },
    { city: "Preveza", iata: "PVK" },
    { city: "Riga", iata: "RIX" },
    { city: "Rimini", iata: "RMI" },
    { city: "Rome (Ciampino)", iata: "CIA" },
    { city: "Rome (Fiumicino)", iata: "FCO" },
    { city: "Salalah", iata: "SLL" },
    { city: "Santorini", iata: "JTR" },
    { city: "Seoul", iata: "ICN" },
    { city: "Seville", iata: "SVQ" },
    { city: "Shannon", iata: "SNN" },
    { city: "Sharm El Sheikh", iata: "SSH" },
    { city: "Shenzhen", iata: "SZX" },
    { city: "Shymkent", iata: "CIT" },
    { city: "Skiathos", iata: "JSI" },
    { city: "Skopje", iata: "SKP" },
    { city: "Sofia", iata: "SOF" },
    { city: "Stockholm", iata: "ARN" },
    { city: "Stuttgart", iata: "STR" },
    { city: "Tallinn", iata: "TLL" },
    { city: "Targu Mures", iata: "TGM" },
    { city: "Tel Aviv", iata: "TLV" },
    { city: "Tenerife", iata: "TFS" },
    { city: "Thessaloniki", iata: "SKG" },
    { city: "Tirana", iata: "TIA" },
    { city: "Toronto", iata: "YYZ" },
    { city: "Toulouse", iata: "TLS" },
    { city: "Treviso", iata: "TSF" },
    { city: "Turin", iata: "TRN" },
    { city: "Valencia", iata: "VLC" },
    { city: "Venice", iata: "VCE" },
    { city: "Vienna", iata: "VIE" },
    { city: "Vilnius", iata: "VNO" },
    { city: "Warsaw", iata: "WAW" },
    { city: "Wroclaw", iata: "WRO" },
    { city: "Xi'an", iata: "XIY" },
    { city: "Zadar", iata: "ZAD" },
    { city: "Zakynthos", iata: "ZTH" },
    { city: "Zurich", iata: "ZRH" },
  ];

  cities.forEach((c) => {
    db.run(
      `INSERT OR IGNORE INTO destinations (city_name, iata_code)
       VALUES (?, ?)`,
      [c.city, c.iata],
    );
  });
});

module.exports = db;
